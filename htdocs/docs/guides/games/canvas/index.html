<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>https://developers.facebook.com/docs/guides/games/canvas/</title>
<link rel="stylesheet" href="/css/common.css" media="screen" />
<script src="/js/common.js"></script>
</head>
<body>
<a id="oklahomer-orig-url" href="https://developers.facebook.com/docs/guides/games/canvas/">https://developers.facebook.com/docs/guides/games/canvas/</a>

<div id="oklahomer-menu-wrapper">
<div class="toplevelnav">
<ul>
<li class="active withsubsections">
<a class="selected" href="/docs/" name="https://developers.facebook.com/docs/" target="">
<div class="navSectionTitle">Getting Started</div>
</a>
<ul class="subsections">
<li>
<a href="/docs/guides/web/" name="https://developers.facebook.com/docs/guides/web" target="">Websites</a>
</li>
<li>
<a href="/docs/guides/canvas/" name="https://developers.facebook.com/docs/guides/canvas" target="">Apps on Facebook</a>
</li>
<li>
<a href="/docs/guides/mobile/" name="https://developers.facebook.com/docs/guides/mobile" target="">Mobile</a>
</li>
<li>
<a href="/docs/appcenter/" name="https://developers.facebook.com/docs/appcenter/" target="">App Center</a>
</li>
<li>
<a href="/docs/bestpractices/" name="https://developers.facebook.com/docs/bestpractices/" target="">Best Practices</a>
</li>
<li>
<a href="/docs/samples/" name="https://developers.facebook.com/docs/samples" target="">Samples &amp; How-Tos</a>
</li>
<li>
<a href="https://developers.facebook.com/videos" name="https://developers.facebook.com/videos" target="_blank">Videos</a>
</li>
</ul>
</li>
<li>
<a href="/docs/coreconcepts/" name="https://developers.facebook.com/docs/coreconcepts" target="">
<div class="navSectionTitle">Core Concepts</div>
</a>
</li>
<li>
<a href="/docs/advancedtopics/" name="https://developers.facebook.com/docs/advancedtopics" target="">
<div class="navSectionTitle">Advanced Topics</div>
</a>
</li>
<li>
<a href="/docs/sdks/" name="https://developers.facebook.com/docs/sdks" target="">
<div class="navSectionTitle">SDK Reference</div>
</a>
</li>
<li>
<a href="https://developers.facebook.com/tools" name="https://developers.facebook.com/tools" target="_blank">
<div class="navSectionTitle">Tools</div>
</a>
</li>
</ul>
</div>
<ul id="navsubsectionpages">
<li>
</li>
<li>
<h5>Getting Started</h5>
<ul>
<li>
<a href="/docs/appsonfacebook/tutorial/" name="http://developers.facebook.com/docs/appsonfacebook/tutorial/" target="">Canvas Tutorial</a>
</li>
<li>
<a href="/docs/guides/games/getting-started/" name="http://developers.facebook.com/docs/guides/games/getting-started/" target="">Social Games Tutorial</a>
</li>
<li>
<a href="/docs/guides/games/growth/" name="http://developers.facebook.com/docs/guides/games/growth/" target="">Social Channels for Games</a>
</li>
<li>
<a href="/docs/requests/" name="http://developers.facebook.com/docs/requests/" target="">Requests Overview</a>
</li>
<li>
<a href="/docs/appsonfacebook/pagetabs/" name="http://developers.facebook.com/docs/appsonfacebook/pagetabs/" target="">Page Tab Tutorial</a>
</li>
</ul>
</li>
<li class="active">
<h5>Best Practices</h5>
<ul>
<li>
<a href="/docs/guides/games/auth/" name="http://developers.facebook.com/docs/guides/games/auth/" target="">Authentication Pro-tips</a>
</li>
<li>
<a href="/docs/guides/games/requests/" name="http://developers.facebook.com/docs/guides/games/requests/" target="">Requests Pro-tips</a>
</li>
<li>
<a href="/docs/guides/games/feed/" name="http://developers.facebook.com/docs/guides/games/feed/" target="">Feed Pro-tips</a>
</li>
<li>
<a class="selected" href="/docs/guides/games/canvas/" name="http://developers.facebook.com/docs/guides/games/canvas/" target="">Integrating with Canvas</a>
</li>
<li>
<a href="/docs/guides/games/monetization/" name="http://developers.facebook.com/docs/guides/games/monetization/" target="">Games Monetization</a>
</li>
</ul>
</li>
<li>
<h5>Showcase</h5>
<ul>
<li>
<a href="/docs/arcadegames/" name="http://developers.facebook.com/docs/arcadegames/" target="">Arcade Games</a>
</li>
<li>
<a href="/docs/bingobash/" name="http://developers.facebook.com/docs/bingobash/" target="">Bingo Bash</a>
</li>
<li>
<a href="/docs/diamonddash/" name="http://developers.facebook.com/docs/diamonddash/" target="">Diamond Dash</a>
</li>
<li>
<a href="http://developers.facebook.com/showcase/games/" name="http://developers.facebook.com/showcase/games/" target="_blank">Games Gallery</a>
</li>
</ul>
</li>
<li>
<h5>How Tos</h5>
<ul>
<li>
<a href="/docs/fluidcanvas/" name="http://developers.facebook.com/docs/fluidcanvas/" target="">Fluid Canvas</a>
</li>
<li>
<a href="/docs/feed-gaming/" name="http://developers.facebook.com/docs/feed-gaming/" target="">Feed Gaming</a>
</li>
<li>
<a href="/docs/hideflashcallback/" name="http://developers.facebook.com/docs/hideflashcallback/" target="">Flash wmode</a>
</li>
<li>
<a href="/docs/guides/games/custom-multi-friend-selector/" name="http://developers.facebook.com/docs/guides/games/custom-multi-friend-selector/" target="">Multi-Friend Selector</a>
</li>
</ul>
</li>
<li>
<h5>Reference</h5>
<ul>
<li>
<a href="/docs/achievements/" name="http://developers.facebook.com/docs/achievements/" target="">Achievements</a>
</li>
<li>
<a href="/docs/score/" name="http://developers.facebook.com/docs/score/" target="">Scores</a>
</li>
<li>
<a href="/docs/reqests_dialog/" name="http://developers.facebook.com/docs/reqests_dialog/" target="">Requests Dialog</a>
</li>
<li>
<a href="/docs/fb_source/" name="http://developers.facebook.com/docs/fb_source/" target="">fb_source Parameter</a>
</li>
</ul>
</li>
</ul></div>

<div id="oklahomer-content-wrapper">
<div class="header">
<div class="content">
<h1>Integrating with Canvas</h1>
<div class="breadcrumbs">
<a href="/docs/" name="https://developers.facebook.com/docs/">Getting Started</a> › <a href="/docs/guides/canvas/" name="https://developers.facebook.com/docs/guides/canvas/">Apps on Facebook</a> › <a href="/docs/guides/games/canvas/" name="https://developers.facebook.com/docs/guides/games/canvas/">Integrating with Canvas</a>
</div>
</div>
</div>
<p>Developing games on Facebook Platform typically involves developing an app on Facebook Canvas. A Canvas game is ultimately a web application loaded into an iframe and presented from within the apps.facebook.com domain, appearing to users as if the game is served from Facebook.com. To get started creating your game on Facebook, please see <a href="/docs/guides/games/getting-started/" name="https://developers.facebook.com/docs/guides/games/getting-started/">Getting Started Building Web Games on Facebook</a> which will walk you through the basics of setting up and configuring your web game on Facebook.</p>
<p>In this section we will discuss some best practices to enable developers to build seamless and immersive user experiences within the Canvas:</p>
<ol>
<li>
<a href="/docs/#fluidcanvas" name="https://developers.facebook.com/docs/#fluidcanvas">Create immersive gaming experiences with Fluid Canvas</a>
</li>
<li>
<a href="/docs/#protip_wmode" name="https://developers.facebook.com/docs/#protip_wmode">Use Flash wmode=opaque when possible</a>
</li>
<li>
<a href="/docs/#engagingcontent" name="https://developers.facebook.com/docs/#engagingcontent">Show engaging content when linking to your app</a>
</li>
<li>
<a href="/docs/#seturlhandler" name="https://developers.facebook.com/docs/#seturlhandler">Use setURLHandler callback to handle of notifications</a>
</li>
<li>
<a href="/docs/#perf" name="https://developers.facebook.com/docs/#perf">Optimize Canvas Performance</a>
</li>
</ol>
<p>
<a name="fluidcanvas">
</a>
</p>
<h3>1. Create immersive gaming experiences with Fluid Canvas</h3>
<p>We designed Fluid Canvas to allow a developer to utilize as much of the Canvas page real estate as possible while maintaining the Facebook Chrome (header) and right sidebar (ticker). By utilizing this feature developers can increase the dimensions of their game and provide a full screen like experience. One major benefit of this approach is that the Facebook Dialogs (Feed, Credits, Requests, etc.) can appear seamlessly without the jarring user experience that occurs when using Full Screen mode.</p>
<p>If your game cannot support variable height and width due to image asset restrictions or game balance (e.g. a 2D side scroller) consider using a background color or image that fills the entire Canvas space while centering your game.</p>
<p>For more details please refer to our <a href="/docs/fluidcanvas/" name="https://developers.facebook.com/docs/fluidcanvas/">how-to on Fluid Canvas</a>.</p>
<p>
<img src="https://developers.facebook.com/attachment/fluid_canvas_example2.jpg" width="700px" />
</p>
<p>
<a name="protip_wmode">
</a>  </p>
<h3>2. Use Flash wmode=opaque to ensure good interactions with the Facebook UI</h3>
<p>If your game utilizes Adobe Flash, make sure to set the wmode attribute to &quot;opaque&quot;. This allows HTML elements to be displayed on top of the Flash content when on Canvas, allowing the Facebook notifications, ticker fly outs, Dialogs, etc. to display correctly.</p>
<p>If this attribute is not set to “opaque” or “transparent” Facebook will hide the Flash content if the user clicks on any UI element that will overlay the Canvas content. This results in a somewhat jarring user experience and should be avoided when possible.</p>
<p>For more details read our <a href="/docs/hideflashcallback/" name="https://developers.facebook.com/docs/hideflashcallback/">how-to for Flash wmode</a>.</p>
<p>
<img src="https://developers.facebook.com/attachment/flashwmode.gif" width="650px" />
</p>
<p>
<a name="engagingcontent">
</a>  </p>
<h3>3. Show engaging content when linking to your app in shared content</h3>
<p>When sharing content via Feed or Open Graph stories are created in the users Feed and Timeline. These stories can, and should, contain links back to your Canvas URL.</p>
<p>When new users click these links consider presenting landing pages that display the relative content that the user clicked on, and not immediately show the Auth Dialog. This will help create a more enticing user experience as it allows the user to see the content they were initially interested in, without having to grant permissions to an app they don’t yet understand.</p>
<p>For example, when creating <a href="/docs/achievements/" name="https://developers.facebook.com/docs/achievements/">Achievements</a> Open Graph pages make sure to provide a user viewable landing experience with artwork and copy that describes the Achievement in detail. When a friend clicks the “[USER] achieved The Great Achievement” story they&apos;ll be taken to this landing page as opposed to an install screen, allowing the user to find out more about the Achievement that they were interested in.</p>
<p>To determine whether a user has installed the app or not when visiting your Canvas URL, check the <a href="/docs/authentication/signed_request/" name="https://developers.facebook.com/docs/authentication/signed_request/">signed_request</a> parameter. After you determine the state of the user you can take the appropriate action.</p>
<p>
<a name="seturlhandler">
</a>  </p>
<h3>4. Use setURLHandler callback to create seamless handling of notifications during game play</h3>
<p>The <a href="/docs/reference/javascript/FB.Canvas.setUrlHandler/" name="https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setUrlHandler/">setURLHandler</a> method in the JavaScript SDK allows a developer to assign a callback method which will be executed whenever a user clicks a link that would direct them back to the current Canvas URL. For example, consider a user is currently playing “My Great Facebook Game” on Canvas when they notice a Request notification from their friend asking for help in “My Great Facebook Game”. Normally clicking this request would reload the page and reset the user’s current state.</p>
<p>If the developer implemented setURLHandler their callback method would be called, passing in the target URL as a parameter. This could then be used to transition the current game into a state to process the request. In the example above rather then reloading the page, the game could immediately prompt the user to assist their friend, a quick and seamless user experience.</p>
<pre>
function onURLHandler(data) {
  alert(data.path);
}

FB.Canvas.setUrlHandler(onURLHandler)
</pre>
<h3 id="perf">5. Optimize Canvas Performance</h3>
<p>In order to improve the performance of your Canvas page, Facebook attempts to automatically determine which static resources are important to your application load time, and fetches them to the browser before contacting your server to get the contents of the iframe. Currently, it does this for Microsoft Internet Explorer versions 8-9 and Google Chrome, although we expect to add more browsers in the future.</p>
<p>Facebook&apos;s automatic systems will provide a modest performance improvement, but you may be able to further improve page load times by explicitly specifying which resources should be prefetched. For best results, we recommend that you specify the largest static resources that are related to the execution of your app (CSS, JS, and SWF files).</p>
<p>To see what resources are being prefetched, you can retrieve the <a href="/docs/reference/api/application/#staticresources" name="https://developers.facebook.com/docs/reference/api/application/#staticresources">
<code>staticresources</code>
</a> connection on the Graph API <a href="/docs/reference/api/application/" name="https://developers.facebook.com/docs/reference/api/application/">Application</a> object. You can also find this information on the HTML source of the canvas page, although the Graph API method returns much more information.</p>
<p>To influence what is prefetched, you can include the Javascript SDK and call these methods on each page load: <a href="/docs/reference/javascript/FB.Canvas.Prefetcher.addStaticResource/" name="https://developers.facebook.com/docs/reference/javascript/FB.Canvas.Prefetcher.addStaticResource/">FB.Canvas.Prefetcher.addStaticResource</a> and <a href="/docs/reference/javascript/FB.Canvas.Prefetcher.setCollectionMode/" name="https://developers.facebook.com/docs/reference/javascript/FB.Canvas.Prefetcher.setCollectionMode/">FB.Canvas.Prefetcher.setCollectionMode</a>.</p>
<p>It&apos;s important that your static resources have the appropriate HTTP headers, otherwise Facebook will ignore them. See <a href="/docs/reference/javascript/FB.Canvas.Prefetcher.addStaticResource/" name="https://developers.facebook.com/docs/reference/javascript/FB.Canvas.Prefetcher.addStaticResource/">FB.Canvas.Prefetcher.addStaticResource</a> for details.</p>
<p>Finally, you can measure the page load performance using <a href="/docs/reference/javascript/FB.Canvas.setDoneLoading/" name="https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setDoneLoading/">FB.Canvas.setDoneLoading</a>. This data will be available in the <a href="https://www.facebook.com/insights/" name="https://www.facebook.com/insights/">Insights</a> tool.</p>
<hr />
<h2>Next steps</h2>
<p>To get started, please familiarize yourself with the following technologies as, in most cases developers will need to interact with them:</p>
<ul>
<li>
<a href="/docs/reference/javascript/" name="https://developers.facebook.com/docs/reference/javascript/">JavaScript SDK</a> - a thin wrapper on the Dialog API and Graph API, used to display UI elements for Facebook apps.</li>
<li>
<a href="/docs/reference/api/" name="https://developers.facebook.com/docs/reference/api/">Graph API</a> - a RESTful API for interacting with the Social Graph.</li>
<li>
<a href="/docs/credits/" name="https://developers.facebook.com/docs/credits/">Credits API</a> - an API to implement payments with the Facebook Platform. This is required for Canvas games.</li>
</ul>
<p>In addition the following docs will help you get started with our social channels and thinking about monetization opportunities:</p>
<ul>
<li>
<a href="/docs/guides/games/growth/" name="https://developers.facebook.com/docs/guides/games/growth/">Social Channels for Games</a> - Best Practices on build social features into Facebook Games.</li>
<li>
<a href="/docs/guides/games/monetization/" name="https://developers.facebook.com/docs/guides/games/monetization/">Monetization Strategies for Games</a> - Monetization Ideas for Social Games. </li>
</ul>
<div class="mtl pvm uiBoxWhite topborder">
<div class="mbm lfloat">
<fb:like href="http://developers.facebook.com/docs/guides/games/canvas/" send="true" show_faces="false">
</fb:like>
</div>
<div class="clear">
<abbr class="timestamp" data-utime="1339105220" title="2012年6月7日 14:40">2012年6月7日 14:40</abbr>
</div>
</div></div>

</body>
</html>
