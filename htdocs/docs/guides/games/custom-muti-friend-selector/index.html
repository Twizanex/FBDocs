<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/</title>
<link rel="stylesheet" href="/css/common.css" media="screen" />
<script src="/js/common.js"></script>
</head>
<body>
<a id="oklahomer-orig-url" href="https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/">https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/</a>

<div id="oklahomer-menu-wrapper">
<div class="toplevelnav">
<ul>
<li class="active withsubsections">
<a class="selected" href="/docs/" name="https://developers.facebook.com/docs/" target="">
<div class="navSectionTitle">Getting Started</div>
</a>
<ul class="subsections">
<li>
<a href="/docs/guides/web/" name="https://developers.facebook.com/docs/guides/web" target="">Websites</a>
</li>
<li>
<a href="/docs/guides/canvas/" name="https://developers.facebook.com/docs/guides/canvas" target="">Apps on Facebook</a>
</li>
<li>
<a href="/docs/guides/mobile/" name="https://developers.facebook.com/docs/guides/mobile" target="">Mobile</a>
</li>
<li>
<a href="/docs/appcenter/" name="https://developers.facebook.com/docs/appcenter/" target="">App Center</a>
</li>
<li>
<a href="/docs/bestpractices/" name="https://developers.facebook.com/docs/bestpractices/" target="">Best Practices</a>
</li>
<li>
<a href="/docs/samples/" name="https://developers.facebook.com/docs/samples" target="">Samples &amp; How-Tos</a>
</li>
<li>
<a href="https://developers.facebook.com/videos" name="https://developers.facebook.com/videos" target="_blank">Videos</a>
</li>
</ul>
</li>
<li>
<a href="/docs/coreconcepts/" name="https://developers.facebook.com/docs/coreconcepts" target="">
<div class="navSectionTitle">Core Concepts</div>
</a>
</li>
<li>
<a href="/docs/advancedtopics/" name="https://developers.facebook.com/docs/advancedtopics" target="">
<div class="navSectionTitle">Advanced Topics</div>
</a>
</li>
<li>
<a href="/docs/sdks/" name="https://developers.facebook.com/docs/sdks" target="">
<div class="navSectionTitle">SDK Reference</div>
</a>
</li>
<li>
<a href="https://developers.facebook.com/tools" name="https://developers.facebook.com/tools" target="_blank">
<div class="navSectionTitle">Tools</div>
</a>
</li>
</ul>
</div>
<ul id="navsubsectionpages">
<li>
</li>
<li>
<h5>Getting Started</h5>
<ul>
<li>
<a href="/docs/appsonfacebook/tutorial/" name="http://developers.facebook.com/docs/appsonfacebook/tutorial/" target="">Canvas Tutorial</a>
</li>
<li>
<a href="/docs/guides/games/getting-started/" name="http://developers.facebook.com/docs/guides/games/getting-started/" target="">Social Games Tutorial</a>
</li>
<li>
<a href="/docs/guides/games/growth/" name="http://developers.facebook.com/docs/guides/games/growth/" target="">Social Channels for Games</a>
</li>
<li>
<a href="/docs/requests/" name="http://developers.facebook.com/docs/requests/" target="">Requests Overview</a>
</li>
<li>
<a href="/docs/appsonfacebook/pagetabs/" name="http://developers.facebook.com/docs/appsonfacebook/pagetabs/" target="">Page Tab Tutorial</a>
</li>
</ul>
</li>
<li>
<h5>Best Practices</h5>
<ul>
<li>
<a href="/docs/guides/games/auth/" name="http://developers.facebook.com/docs/guides/games/auth/" target="">Authentication Pro-tips</a>
</li>
<li>
<a href="/docs/guides/games/requests/" name="http://developers.facebook.com/docs/guides/games/requests/" target="">Requests Pro-tips</a>
</li>
<li>
<a href="/docs/guides/games/feed/" name="http://developers.facebook.com/docs/guides/games/feed/" target="">Feed Pro-tips</a>
</li>
<li>
<a href="/docs/guides/games/canvas/" name="http://developers.facebook.com/docs/guides/games/canvas/" target="">Integrating with Canvas</a>
</li>
<li>
<a href="/docs/guides/games/monetization/" name="http://developers.facebook.com/docs/guides/games/monetization/" target="">Games Monetization</a>
</li>
</ul>
</li>
<li>
<h5>Showcase</h5>
<ul>
<li>
<a href="/docs/arcadegames/" name="http://developers.facebook.com/docs/arcadegames/" target="">Arcade Games</a>
</li>
<li>
<a href="/docs/bingobash/" name="http://developers.facebook.com/docs/bingobash/" target="">Bingo Bash</a>
</li>
<li>
<a href="/docs/diamonddash/" name="http://developers.facebook.com/docs/diamonddash/" target="">Diamond Dash</a>
</li>
<li>
<a href="http://developers.facebook.com/showcase/games/" name="http://developers.facebook.com/showcase/games/" target="_blank">Games Gallery</a>
</li>
</ul>
</li>
<li class="active">
<h5>How Tos</h5>
<ul>
<li>
<a href="/docs/fluidcanvas/" name="http://developers.facebook.com/docs/fluidcanvas/" target="">Fluid Canvas</a>
</li>
<li>
<a href="/docs/feed-gaming/" name="http://developers.facebook.com/docs/feed-gaming/" target="">Feed Gaming</a>
</li>
<li>
<a href="/docs/hideflashcallback/" name="http://developers.facebook.com/docs/hideflashcallback/" target="">Flash wmode</a>
</li>
<li>
<a class="selected" href="/docs/guides/games/custom-muti-friend-selector/" name="http://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/" target="">Multi-Friend Selector</a>
</li>
</ul>
</li>
<li>
<h5>Reference</h5>
<ul>
<li>
<a href="/docs/achievements/" name="http://developers.facebook.com/docs/achievements/" target="">Achievements</a>
</li>
<li>
<a href="/docs/score/" name="http://developers.facebook.com/docs/score/" target="">Scores</a>
</li>
<li>
<a href="/docs/reqests_dialog/" name="http://developers.facebook.com/docs/reqests_dialog/" target="">Requests Dialog</a>
</li>
<li>
<a href="/docs/fb_source/" name="http://developers.facebook.com/docs/fb_source/" target="">fb_source Parameter</a>
</li>
</ul>
</li>
</ul></div>

<div id="oklahomer-content-wrapper">
<div class="header">
<div class="content">
<h1>Multi-Friend Selector</h1>
<div class="breadcrumbs">
<a href="/docs/" name="https://developers.facebook.com/docs/">Getting Started</a> › <a href="/docs/guides/canvas/" name="https://developers.facebook.com/docs/guides/canvas/">Apps on Facebook</a> › <a href="/docs/guides/games/custom-muti-friend-selector/" name="https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/">Multi-Friend Selector</a>
</div>
</div>
</div>
<p>This document walks you through how to build a custom Multi-Friend Selector for sending <a href="/docs/requests/" name="https://developers.facebook.com/docs/requests">Requests</a> using the <a href="/docs/reference/api/" name="https://developers.facebook.com/docs/reference/api/">Graph API</a> and <a href="/docs/reference/javascript/" name="https://developers.facebook.com/docs/reference/javascript/">JavaScript SDK</a>.</p>
<ol>
<li>
<a href="/docs/#step1" name="https://developers.facebook.com/docs/#step1">Get a list of friends via the Graph API</a>
</li>
<li>
<a href="/docs/#step2" name="https://developers.facebook.com/docs/#step2">Send a Request to the list of friends</a>
</li>
</ol>
<p>
<a name="step1">
</a>
</p>
<h2>Get a list of friends via the Graph API</h2>
<p>The first step is to request a list of the users&apos; friend via the Graph API. In our example we will be using a purely client side flow with JavaScript. To get a users friends make a GET request to:</p>
<pre>
<code> https://graph.facebook.com/USER_ID/friends
</code>
</pre>
<p>which will return the complete list of friends sorted by user id ascending:</p>
<pre>
<code> {
   &quot;data&quot;: [
   {
     &quot;name&quot;: &quot;Friend 1 Name&quot;, 
     &quot;id&quot;: &quot;FRIEND1_USER_ID&quot;
   }, 
   {
     &quot;name&quot;: &quot;Friend 2 Name&quot;, 
     &quot;id&quot;: &quot;FRIEND2_USER_ID&quot;
   }, 
 }
</code>
</pre>
<p>You will notice that we get an object for each friend that contain the <code>name</code> and <code>id</code> properties. Now that we have the data set we need, the next step is to construct our user interface, allowing out users to select the list of friends they would like to send requests to. The example code below will build a very basic UI in simple HTML:</p>
<pre>
<code> function renderMFS() {
 // First get the list of friends for this user with the Graph API
 FB.api(&apos;/me/friends&apos;, function(response) {
   var container = document.getElementById(&apos;mfs&apos;);
   var mfsForm = document.createElement(&apos;form&apos;);
   mfsForm.id = &apos;mfsForm&apos;;

   // Iterate through the array of friends object and create a checkbox for each one.
   for(var i = 0; i &lt; Math.min(response.data.length, 10); i++) {
     var friendItem = document.createElement(&apos;div&apos;);
     friendItem.id = &apos;friend_&apos; + response.data[i].id;
     friendItem.innerHTML = &apos;&lt;input type=&quot;checkbox&quot; name=&quot;friends&quot; value=&quot;&apos;
       + response.data[i].id
       + &apos;&quot; /&gt;&apos; + response.data[i].name;
       mfsForm.appendChild(friendItem);
     }
     container.appendChild(mfsForm);

     // Create a button to send the Request(s)
     var sendButton = document.createElement(&apos;input&apos;);
     sendButton.type = &apos;button&apos;;
     sendButton.value = &apos;Send Request&apos;;
     sendButton.onclick = sendRequest;
     mfsForm.appendChild(sendButton);
   });
 }
</code>
</pre>
<p>This results in a Multi-Friend Selector like:</p>
<p>
<img src="https://developers.facebook.com/attachment/custom_mfs.jpg" width="595" />
</p>
<p>Users can now select which friend(s) they would like to send a Request to directly. As a best practice you should design your UI to match the aesthetic of your game and consider creating pre-filtered lists of friends as tabs in your custom MFS.</p>
<p>Some popular ideas include:</p>
<h3>Friends that use this app</h3>
<p>You can get a list of users that have installed you app by executing an <a href="/docs/" name="https://developers.facebook.com/docs/">FQL</a> like:</p>
<pre>
<code> SELECT uid, name, is_app_user, pic_square
   FROM user WHERE uid
   IN
     (SELECT uid2 FROM friend WHERE uid1 = me())
   AND is_app_user = 1
</code>
</pre>
<p>In the example JavaScript above, replace the <code>FB.api</code> call with:</p>
<pre>
<code> FB.api(&apos;/fql&amp;q=SELECT uid, name, is_app_user, pic_square FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1&apos;,
   function(response) { ...
</code>
</pre>
<h3>Friends that use our apps</h3>
<p>In order to get this list you will need to get the full list of users&apos; friend and then intersect this against your database of installed users for other apps you have published.</p>
<h3>Friends that play games</h3>
<p>Another interesting filter would be to highlight users that are highly engaged with your game and are friends of the current user. Providing suggested recipients like this for Requests can result in a higher rate of conversion for accepting the Request. As a result the sending user is more likely to have their request accepted and continue to be engaged in your app.</p>
<p>
<a name="step2">
</a>  </p>
<h2>Send a Request to the list of friends</h2>
<p>The final step is to send the Request to the selected users. Our example code will iterate through the list of selected friends and construct a comma delimited string of User IDs, then pass this string to the <a href="/docs/reference/dialogs/requests/" name="https://developers.facebook.com/docs/reference/dialogs/requests/">Request Dialog</a> with the <code>to</code> parameter.</p>
<pre>
<code> function sendRequest() {
   // Get the list of selected friends
   var sendUIDs = &apos;&apos;;
   var mfsForm = document.getElementById(&apos;mfsForm&apos;);
     for(var i = 0; i &lt; mfsForm.friends.length; i++) {
       if(mfsForm.friends[i].checked) {
         sendUIDs += mfsForm.friends[i].value + &apos;,&apos;;
       }
     }

   // Use FB.ui to send the Request(s)
   FB.ui({method: &apos;apprequests&apos;,
     to: sendUIDs,
     title: &apos;My Great Invite&apos;,
     message: &apos;Check out this Awesome App!&apos;,
   }, callback);
 }

 function callback(response) {
   console.log(response);
 }
</code>
</pre>
<p>Click on the &apos;Send Request&apos; button will result in a <a href="/docs/reference/dialogs/requests/" name="https://developers.facebook.com/docs/reference/dialogs/requests/">Request Dialog</a> like:</p>
<p>
<img src="https://developers.facebook.com/attachment/frictions_reqs.png" width="600" />
</p>
<p>If you have enabled <a href="/docs/reference/dialogs/requests/#frictionless_requests" name="https://developers.facebook.com/docs/reference/dialogs/requests/#frictionless_requests">Frictionless Requests</a> for your app the user will only see this dialog the first time they send a user to a specific recipient. For subsequent requests to the same user the dialog will no longer be displayed creating a customized and seamless experience in your game.</p>
<hr />
<h2>Further Reading:</h2>
<ul>
<li>
<a href="/docs/guides/games/requests/" name="https://developers.facebook.com/docs/guides/games/requests/">Best Practices around Requests</a>
</li>
</ul>
<div class="mtl pvm uiBoxWhite topborder">
<div class="mbm lfloat">
<fb:like href="http://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/" send="true" show_faces="false">
</fb:like>
</div>
<div class="clear">
<abbr class="timestamp" data-utime="1337623498" title="2012年5月21日 11:04">2012年5月21日 11:04</abbr>
</div>
</div></div>

</body>
</html>
