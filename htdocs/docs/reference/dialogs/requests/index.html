<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>https://developers.facebook.com/docs/reference/dialogs/requests/</title>
<link rel="stylesheet" href="/css/common.css" media="screen" />
<script src="/js/common.js"></script>
</head>
<body>
<a id="oklahomer-orig-url" href="https://developers.facebook.com/docs/reference/dialogs/requests/">https://developers.facebook.com/docs/reference/dialogs/requests/</a>

<div id="oklahomer-menu-wrapper">
<div class="toplevelnav">
<ul>
<li>
<a href="/docs/" name="https://developers.facebook.com/docs/">
<div class="navSectionTitle">Getting Started</div>
</a>
</li>
<li>
<a href="/docs/coreconcepts/" name="https://developers.facebook.com/docs/coreconcepts">
<div class="navSectionTitle">Core Concepts</div>
</a>
</li>
<li class="active withsubsections">
<a class="selected" href="/docs/advancedtopics/" name="https://developers.facebook.com/docs/advancedtopics">
<div class="navSectionTitle">Advanced Topics</div>
</a>
<ul class="subsections">
<li>
<a class="selected" href="/docs/reference/dialogs/" name="https://developers.facebook.com/docs/reference/dialogs/">Dialogs</a>
</li>
<li>
<a href="/docs/reference/fql/" name="https://developers.facebook.com/docs/reference/fql/">FQL</a>
</li>
<li>
<a href="/docs/internationalization/" name="https://developers.facebook.com/docs/internationalization">Internationalization</a>
</li>
<li>
<a href="/docs/reference/ads-api/" name="https://developers.facebook.com/docs/reference/ads-api">Ads API</a>
</li>
<li>
<a href="/docs/credits/" name="https://developers.facebook.com/docs/credits">Credits</a>
</li>
<li>
<a href="/docs/chat/" name="https://developers.facebook.com/docs/chat">Chat API</a>
</li>
<li>
<a href="/docs/reference/rest/" name="https://developers.facebook.com/docs/reference/rest/">Legacy REST API</a>
</li>
<li>
<a href="/docs/reference/fbml/" name="https://developers.facebook.com/docs/reference/fbml/">Legacy FBML</a>
</li>
<li>
<a href="/docs/fbjs/" name="https://developers.facebook.com/docs/fbjs/">Legacy FBJS</a>
</li>
<li>
<a href="/docs/reference/oldjavascript/" name="https://developers.facebook.com/docs/reference/oldjavascript/">Legacy Javascript SDK</a>
</li>
</ul>
</li>
<li>
<a href="/docs/sdks/" name="https://developers.facebook.com/docs/sdks">
<div class="navSectionTitle">SDK Reference</div>
</a>
</li>
<li>
<a href="https://developers.facebook.com/tools" name="https://developers.facebook.com/tools" target="_blank">
<div class="navSectionTitle">Tools</div>
</a>
</li>
</ul>
</div>
<ul id="navsubsectionpages">
<li>
</li>
<li>
<h5>Dialogs</h5>
<ul>
<li>
<a href="/docs/reference/dialogs/add_to_page/" name="http://developers.facebook.com/docs/reference/dialogs/add_to_page/">Add Page Tab Dialog</a>
</li>
<li>
<a href="/docs/reference/dialogs/feed/" name="http://developers.facebook.com/docs/reference/dialogs/feed/">Feed Dialog</a>
</li>
<li>
<a href="/docs/reference/dialogs/friends/" name="http://developers.facebook.com/docs/reference/dialogs/friends/">Friends Dialog</a>
</li>
<li>
<a href="/docs/reference/dialogs/oauth/" name="http://developers.facebook.com/docs/reference/dialogs/oauth/">OAuth Dialog</a>
</li>
<li>
<a href="/docs/reference/dialogs/pay/" name="http://developers.facebook.com/docs/reference/dialogs/pay/">Pay Dialog</a>
</li>
<li>
<a href="/docs/reference/dialogs/requests/" name="http://developers.facebook.com/docs/reference/dialogs/requests/">Requests Dialog</a>
</li>
<li>
<a href="/docs/reference/dialogs/send/" name="http://developers.facebook.com/docs/reference/dialogs/send/">Send Dialog</a>
</li>
</ul>
</li>
</ul></div>

<div id="oklahomer-content-wrapper">
<div class="header">
<div class="content">
<h1>Requests Dialog</h1>
<div class="breadcrumbs">
<a href="/docs/advancedtopics/" name="https://developers.facebook.com/docs/advancedtopics/">Advanced Topics</a> › <a href="/docs/reference/dialogs/" name="https://developers.facebook.com/docs/reference/dialogs/">Dialogs</a> › <a href="/docs/reference/dialogs/requests/" name="https://developers.facebook.com/docs/reference/dialogs/requests/">Requests Dialog</a>
</div>
</div>
</div>
<h2>Overview</h2>
<p>The Request Dialog sends a Request from one user (the sender) to one or more users (the recipients). The Request Dialog can be used to send a Request directly from one user to another or display a Multi Friend Selector Dialog, allowing the sending user to select multiple recipient users.</p>
<p>This documentation covers the Request Dialog API. For more information on the full set of features available to Requests including how recipient users interact with a Request be sure to check out the <a href="/docs/requests/" name="https://developers.facebook.com/docs/requests">Requests Docs</a>.</p>
<p>It is the <strong>Developers&apos; responsibility</strong> to delete a Request once it has been accepted. For more information on how to delete a Request, please see the <a href="/docs/requests/#deleting" name="https://developers.facebook.com/docs/requests/#deleting">Deleting Requests</a> documentation.</p>
<p>Requests are only available for Desktop <a href="/docs/appsonfacebook/tutorial/" name="https://developers.facebook.com/docs/appsonfacebook/tutorial/">Canvas</a> apps and not websites. Accepting a request will direct the user to the Canvas Page URL of the app that sent the Request.</p>
<p>
<a name="javascript_example">
</a>
</p>
<h2>JavaScript Example</h2>
<p>This example uses the JavaScript SDK to render a modal Requests Dialog and assumes the user has already installed the application.</p>
<pre>
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
  xmlns:fb=&quot;https://www.facebook.com/2008/fbml&quot;&gt;
  &lt;head&gt;
    &lt;title&gt;Request Example&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;div id=&quot;fb-root&quot;&gt;&lt;/div&gt;
    &lt;script src=&quot;http://connect.facebook.net/en_US/all.js&quot;&gt;&lt;/script&gt;
    &lt;p&gt;
      &lt;input type=&quot;button&quot;
        onclick=&quot;sendRequestToRecipients(); return false;&quot;
        value=&quot;Send Request to Users Directly&quot;
      /&gt;
      &lt;input type=&quot;text&quot; value=&quot;User ID&quot; name=&quot;user_ids&quot; /&gt;
      &lt;/p&gt;
    &lt;p&gt;
    &lt;input type=&quot;button&quot;
      onclick=&quot;sendRequestViaMultiFriendSelector(); return false;&quot;
      value=&quot;Send Request to Many Users with MFS&quot;
    /&gt;
    &lt;/p&gt;
    
    &lt;script&gt;
      FB.init({
        appId  : &apos;YOUR_APP_ID&apos;,
        frictionlessRequests: true,
      });

      function sendRequestToRecipients() {
        var user_ids = document.getElementsByName(&quot;user_ids&quot;)[0].value;
        FB.ui({method: &apos;apprequests&apos;,
          message: &apos;My Great Request&apos;,
          to: user_ids, 
        }, requestCallback);
      }

      function sendRequestViaMultiFriendSelector() {
        FB.ui({method: &apos;apprequests&apos;,
          message: &apos;My Great Request&apos;
        }, requestCallback);
      }
      
      function requestCallback(response) {
        // Handle callback here
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
<h2>Sending Requests</h2>
<p>You can send Requests to a set of users by <a href="/docs/#direct_request" name="https://developers.facebook.com/docs/#direct_request">specifying</a> their User ID or allow a user to <a href="/docs/#mfs" name="https://developers.facebook.com/docs/#mfs">select</a> the recipients using the multi-friend selector.</p>
<p>
<a name="direct_request">
</a>
</p>
<h3>Send a Request One or More Users</h3>
<p>To send a request to a single user you will need to invoke the Request Dialog with the <code>to</code> parameter and use it to include the User ID of the recipient user. See below:</p>
<pre>
function sendRequestToRecipients() {
  FB.ui({method: &apos;apprequests&apos;,
    message: &apos;My Great Request&apos;,
    to: &apos;499802820&apos;
  }, requestCallback);
}
</pre>
<p>You can pass an <code>array</code> or comma delimited string of User IDs to send a Request to multiple users:</p>
<pre>
function sendRequestToRecipients() {
  FB.ui({method: &apos;apprequests&apos;,
    message: &apos;My Great Request&apos;,
    to: &apos;499802820,499802852&apos;
  }, requestCallback);
}
</pre>
<p>The user will see a dialog that looks like the following, allowing them to send a Request to the target user(s):</p>
<p>
<img src="https://developers.facebook.com/attachment/167510_796701077491_703_41122129_3586505_n.jpeg" />
</p>
<p>
<a name="mfs">
</a>
</p>
<h3>Enabling the Multi Friend Selector Dialog for Requests</h3>
<p>To enable the user to select who they would like to send a request to you can invoke the Request Dialog as below (notice the absence of the <code>to</code> parameter):</p>
<pre>
function sendRequestViaMultiFriendSelector() {
  FB.ui({method: &apos;apprequests&apos;,
    message: &apos;My Great Request&apos;,
  }, requestCallback);
}
</pre>
<p>The user will see the Multi Friend Selector Dialog, allowing them to select the recipient users of the Request. A user is limited to selecting 50 recipients at a time (and 25 recipients if they are using IE6/7).</p>
<p>
<img src="https://developers.facebook.com/attachment/multi_request_dialog.png/" />
<br />
</p>
<p>
<a name="frictionless_requests">
</a>
</p>
<h3 id="frictionless_requests">Frictionless Requests</h3>
<p>Frictionless Requests enable users to send Requests to specific friends from within an app without having to click on a pop-up confirmation dialog. Upon sending a Request to a friend from within an app, a user may authorize the app to send subsequent Requests to the same friend without a Dialog prompt. This removes a Dialog from the flow and streamlines the process of sharing with friends.</p>
<p>As a best practice <a href="/docs/guides/canvas/" name="https://developers.facebook.com/docs/guides/canvas/">Canvas</a> developers should always enabled Frictionless Requests.</p>
<p>
<img src="https://developers.facebook.com/attachment/frictionless_requests.png" />
<br />
<br />
</p>
<p>To enable Frictionless Requests you must initialize the JavaScript SDK with the <code>‘frictionlessRequests:true’</code> option in <a href="/docs/reference/javascript/FB.init/" name="https://developers.facebook.com/docs/reference/javascript/FB.init/">FB.init</a>. You send Requests to users via the Requests Dialog just as before. As users share with friends, they may authorize the app to send future requests to specific friends on their behalf.</p>
<p>If you are sending a Request to multiple recipients and all of the user IDs are frictionless, the confirmation dialog will not display and the users will be notified of the Request. If one or more of the recipients are not frictionless, the confirmation dialog will be displayed and the user must press ‘Send Request’ for the Request to be sent.</p>
<p>Building on the <a href="/docs/#javascript_example" name="https://developers.facebook.com/docs/#javascript_example">JavaScript example</a> from above, add <code>‘frictionlessRequests:true’</code> to the <code>FB.init</code> call to enable Frictionless Requests:</p>
<pre>
FB.init({
  appId  : &apos;YOUR_APP_ID&apos;,
  frictionlessRequests : true,
});
</pre>
<p>Frictionless Requests are currently only supported with the Javascript SDK on Desktop <a href="/docs/appsonfacebook/tutorial/" name="https://developers.facebook.com/docs/appsonfacebook/tutorial/">Canvas</a>. You cannot use frictionless requests in native iOS or Android apps, or from any server-side SDKs.</p>
<h2>Direct URL Example</h2>
<p>This example uses the the raw URL to render a Request Dialog for your app. One key difference from using this method over the JavaScript SDK is the requirement of the redirect_uri parameter.</p>
<pre>
https://www.facebook.com/dialog/apprequests?
  app_id=APP_ID&amp;
  message=Facebook%20Dialogs%20are%20so%20easy!&amp;
  redirect_uri=http://www.example.com/response
</pre>
<p>After the user follows the flow and sends the request the browser will redirect to</p>
<pre>http://example.com/response?request=REQUEST_ID&amp;to=ARRAY_OF_USER_IDS</pre>
<p>If there are errors, the browser will redirect to</p>
<pre>http://example.com/response?error_code=ERROR_CODE&amp;error_msg=ERROR_MSG</pre>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<code>app_id</code>
</td>
<td>Your application&apos;s identifier. Required, but automatically specified by most SDKs.</td>
</tr>
<tr>
<td>
<code>redirect_uri</code>
</td>
<td>The URL to redirect to after the user clicks a button on the dialog. Required, but automatically specified by most SDKs.</td>
</tr>
<tr>
<td>
<code>message</code>
</td>
<td>
<p>The Request string the receiving user will see. It appears as a request posed by the sending user. The maximum length is 255 characters. The message value is not displayed in Notifications and can only be viewed on the <a href="https://www.facebook.com/games/" name="https://www.facebook.com/games/" target="_blank">Apps and Games Dashboard</a>. Invites (requests where the recipient has not installed the app) do not display this value.</p>
</td>
</tr>
<tr>
<td>
<code>to</code>
</td>
<td>
<p>A user ID or username. This may or may not be a friend of the user. If this is specified, the user will not have a choice of recipients. If this is omitted, the user will see a <a href="/docs/#mfs" name="https://developers.facebook.com/docs/#mfs">Multi Friend Selector</a> and will be able to select a maximum of 50 recipients. (Due to URL length restrictions, the maximum number of recipients is 25 in IE7/IE8 when using a non-iframe dialog.)</p>
</td>
</tr>
<tr>
<td>
<code>filters</code>
</td>
<td>
<p>Optional, default is &apos;&apos;, which shows a <a href="/docs/#mfs" name="https://developers.facebook.com/docs/#mfs">Multi Friend Selector</a> that includes the ability for a user to browse all friends, but also filter to friends using the application and friends not using the application. Can also be <code>all</code>, <code>app_users</code> and <code>app_non_users</code>. This controls what set of friends the user sees if a <a href="/docs/#mfs" name="https://developers.facebook.com/docs/#mfs">Multi Friend Selector</a> is shown. If <code>all</code>, <code>app_users</code> ,or <code>app_non_users</code> is specified, the user will only be able to see users in that list and will not be able to filter to another list. Additionally, an application can suggest custom filters as dictionaries with a <code>name</code> key and a <code>user_ids</code> key, which respectively have values that are a string and a list of user IDs. <code>name</code> is the name of the custom filter that will show in the selector. <code>user_ids</code> is the list of friends to include, in the order they are to appear.<br />
<br />Example #1<br />
<br />[{name: &apos;Neighbors&apos;, user_ids: [1, 2, 3]}, {name: &apos;Other Set&apos;, user_ids: [4,5,6]}]<br />
<br />Example #2<br />
<br />[&apos;app_users&apos;]</p>
<b>Note: </b>the filters option is disabled on mobile dialogs and will not affect the set of users that appear in the dialog.</td>
</tr>
<tr>
</tr>
<tr>
<td>
<code>exclude_ids</code>
</td>
<td>
<p>A array of user IDs that will be excluded from the Dialog, for example:<br />
<br /> exclude_ids: [1, 2, 3]<br />
<br />If a user is excluded from the Dialog, the user will not show in the <a href="/docs/#mfs" name="https://developers.facebook.com/docs/#mfs">Multi Friend Selector</a>. This parameter is not supported on mobile devices.</p>
</td>
</tr>
<tr>
<td>
<code>max_recipients</code>
</td>
<td>
<p>An integer that specifies the maximum number of friends that can be chosen by the user in the friend selector. This parameter is not supported on mobile devices.</p>
</td>
</tr>
<tr>
<td>
<code>data</code>
</td>
<td>
<p>Optional, additional data you may pass for tracking. This will be stored as part of the request objects created. The maximum length is 255 characters.</p>
</td>
</tr>
<tr>
<td>
<code>title</code>
</td>
<td>
<p>Optional, the title for the Dialog. Maximum length is 50 characters.</p>
</td>
</tr>
</tbody>
</table>
<p>For a list of properties that are common to all Dialogs, please check out the <a href="/docs/reference/dialogs/" name="https://developers.facebook.com/docs/reference/dialogs/">Dialogs Documentation</a>.</p>
<h3>Return Data</h3>
<table>
<tbody>
<tr>
<td>
<code> request </code>
</td>
<td>
<p>The Request Object ID. To get the full Request ID, concatenate this with a user ID from the <code>to</code> field: <code>‘&lt;request_object_id&gt;_&lt;user_id&gt;’</code>
</p>
</td>
</tr>
<tr>
<td>
<code> to </code>
</td>
<td>
<p>An <code>array</code> of the recipient user IDs for the request that was created.</p>
</td>
</tr>
</tbody>
</table>
<div class="mtl pvm uiBoxWhite topborder">
<div class="mbm lfloat">
<fb:like href="http://developers.facebook.com/docs/reference/dialogs/requests/" send="true" show_faces="false">
</fb:like>
</div>
<div class="clear">
<abbr class="timestamp" data-utime="1334870216" title="2012年4月19日 14:16">2012年4月19日 14:16</abbr>
</div>
</div></div>

</body>
</html>
