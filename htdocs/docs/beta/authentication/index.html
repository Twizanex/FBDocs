<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>https://developers.facebook.com/docs/beta/authentication/</title>
<link rel="stylesheet" href="/css/common.css" media="screen" />
<script src="/js/common.js"></script>
</head>
<body>
<a id="oklahomer-orig-url" href="https://developers.facebook.com/docs/beta/authentication/">https://developers.facebook.com/docs/beta/authentication/</a>

<div id="oklahomer-menu-wrapper">
<div class="toplevelnav">
<ul>
<li>
<a href="/docs/" name="https://developers.facebook.com/docs/">
<div class="navSectionTitle">Getting Started</div>
</a>
</li>
<li class="active withsubsections">
<a class="selected" href="/docs/coreconcepts/" name="https://developers.facebook.com/docs/coreconcepts">
<div class="navSectionTitle">Core Concepts</div>
</a>
<ul class="subsections">
<li>
<a href="https://developers.facebook.com/socialdesign" name="https://developers.facebook.com/socialdesign" target="_blank">Social Design</a>
</li>
<li>
<a href="/docs/plugins/" name="https://developers.facebook.com/docs/plugins">Social Plugins</a>
</li>
<li>
<a href="/docs/opengraph/" name="https://developers.facebook.com/docs/opengraph">Open Graph</a>
</li>
<li>
<a href="/docs/channels/" name="https://developers.facebook.com/docs/channels">Social Channels</a>
</li>
<li>
<a href="/docs/authentication/" name="https://developers.facebook.com/docs/authentication">Authentication</a>
</li>
<li>
<a href="/docs/reference/api/" name="https://developers.facebook.com/docs/reference/api">Graph API</a>
</li>
</ul>
</li>
<li>
<a href="/docs/advancedtopics/" name="https://developers.facebook.com/docs/advancedtopics">
<div class="navSectionTitle">Advanced Topics</div>
</a>
</li>
<li>
<a href="/docs/sdks/" name="https://developers.facebook.com/docs/sdks">
<div class="navSectionTitle">SDK Reference</div>
</a>
</li>
<li>
<a href="https://developers.facebook.com/tools" name="https://developers.facebook.com/tools" target="_blank">
<div class="navSectionTitle">Tools</div>
</a>
</li>
</ul>
</div>
<ul id="navsubsectionpages">
<li>
</li>
<li class="active">
<h5>Getting Started</h5>
<ul>
<li>
<a href="/docs/opengraph/keyconcepts/" name="http://developers.facebook.com/docs/opengraph/keyconcepts/">Key Concepts</a>
</li>
<li>
<a href="/docs/opengraph/tutorial/" name="http://developers.facebook.com/docs/opengraph/tutorial/">Tutorial</a>
</li>
<li>
<a class="selected" href="/docs/opengraph/authentication/" name="http://developers.facebook.com/docs/opengraph/authentication/">Auth Dialog</a>
</li>
<li>
<a href="/docs/opengraph/plugins/" name="http://developers.facebook.com/docs/opengraph/plugins/">Social Plugins</a>
</li>
<li>
<a href="/docs/opengraph/samples/" name="http://developers.facebook.com/docs/opengraph/samples/">Open Graph Samples</a>
</li>
</ul>
</li>
<li>
<h5>Open Graph Tool</h5>
<ul>
<li>
<a href="/docs/opengraph/define-objects/" name="http://developers.facebook.com/docs/opengraph/define-objects/">Define Objects</a>
</li>
<li>
<a href="/docs/opengraph/define-actions/" name="http://developers.facebook.com/docs/opengraph/define-actions/">Define Actions</a>
</li>
<li>
<a href="/docs/opengraph/define-units/" name="http://developers.facebook.com/docs/opengraph/define-units/">Define Aggregations</a>
</li>
<li>
<a href="/docs/opengraph/opengraph-approval/" name="http://developers.facebook.com/docs/opengraph/opengraph-approval/">Submit for Approval</a>
</li>
<li>
<a href="/docs/opengraph/template/" name="http://developers.facebook.com/docs/opengraph/template/">Using Text Templates</a>
</li>
</ul>
</li>
<li>
<h5>Reference</h5>
<ul>
<li>
<a href="/docs/opengraph/objects/" name="http://developers.facebook.com/docs/opengraph/objects/">Using Objects</a>
</li>
<li>
<a href="/docs/opengraph/actions/" name="http://developers.facebook.com/docs/opengraph/actions/">Using Actions</a>
</li>
<li>
<a href="/docs/opengraph/permissions/" name="http://developers.facebook.com/docs/opengraph/permissions/">Open Graph Permissions</a>
</li>
<li>
<a href="/docs/opengraph/objects/builtin/" name="http://developers.facebook.com/docs/opengraph/objects/builtin/">Built-in Object Types</a>
</li>
<li>
<a href="/docs/opengraph/actions/builtin/" name="http://developers.facebook.com/docs/opengraph/actions/builtin/">Built-in Action Types</a>
</li>
<li>
<a href="/docs/opengraph/simpletypes/" name="http://developers.facebook.com/docs/opengraph/simpletypes/">Simple Types</a>
</li>
<li>
<a href="/docs/opengraph/complextypes/" name="http://developers.facebook.com/docs/opengraph/complextypes/">Complex Types</a>
</li>
<li>
<a href="/docs/opengraph/checklist/" name="http://developers.facebook.com/docs/opengraph/checklist/">Open Graph Checklist</a>
</li>
<li>
<a href="/docs/opengraph/publish-past-actions/" name="http://developers.facebook.com/docs/opengraph/publish-past-actions/">Publishing Past Actions</a>
</li>
<li>
<a href="/docs/opengraph/usergeneratedphotos/" name="http://developers.facebook.com/docs/opengraph/usergeneratedphotos/">User Generated Photos in Open Graph</a>
</li>
</ul>
</li>
<li>
<h5>Advanced</h5>
<ul>
<li>
<a href="/docs/opengraph/internationalization/" name="http://developers.facebook.com/docs/opengraph/internationalization/">Open Graph Internationalization</a>
</li>
<li>
<a href="/docs/opengraph/actionlinks/" name="http://developers.facebook.com/docs/opengraph/actionlinks/">Action Links</a>
</li>
<li>
<a href="/docs/opengraph/insights/" name="http://developers.facebook.com/docs/opengraph/insights/">Open Graph Insights</a>
</li>
<li>
<a href="/docs/opengraph/userrestrictions/" name="http://developers.facebook.com/docs/opengraph/userrestrictions/">User Restrictions</a>
</li>
<li>
<a href="/docs/opengraph/using-app-tokens/" name="http://developers.facebook.com/docs/opengraph/using-app-tokens/">Using App Access Tokens</a>
</li>
</ul>
</li>
<li>
<h5>Archive</h5>
<ul>
<li>
<a href="/docs/opengraphprotocol/" name="http://developers.facebook.com/docs/opengraphprotocol/">Open Graph Protocol</a>
</li>
</ul>
</li>
</ul></div>

<div id="oklahomer-content-wrapper">
<div class="header">
<div class="content">
<h1>Auth Dialog</h1>
<div class="breadcrumbs">
<a href="/docs/coreconcepts/" name="https://developers.facebook.com/docs/coreconcepts/">Core Concepts</a> › <a href="/docs/opengraph/" name="https://developers.facebook.com/docs/opengraph/">Open Graph</a> › <a href="/docs/opengraph/authentication/" name="https://developers.facebook.com/docs/opengraph/authentication/">Auth Dialog</a>
</div>
</div>
</div>
<table bgcolor="#fff9d7">
<tr>
<td> To enable the new Auth Dialog, go to the App Dashboard, and enable the <b>Enhanced Auth Dialog</b> setting in the Advanced section of your app. </td>
</tr>
</table>
<p>As your application&apos;s first point of contact, the <strong>Auth Dialog</strong> has been revamped to help you build a richer and more exciting experience for new users. You now have greater control over the dialog appearance, user messaging, and application branding, allowing you to highlight interesting features and showcase Open Graph integrations.</p>
<p>We will cover the following topics:</p>
<ul>
<li>
<a href="/docs/beta/authentication/#configure" name="https://developers.facebook.com/docs/beta/authentication/#configure">Configuring</a> the Auth Dialog</li>
<li>Optimizing user activation with <a href="/docs/beta/authentication/#referrals" name="https://developers.facebook.com/docs/beta/authentication/#referrals">Authenticated Referrals</a>
</li>
<li>Improving user engagement with <a href="/docs/beta/authentication/#add-data" name="https://developers.facebook.com/docs/beta/authentication/#add-data">Add Data to Profile URL</a>
</li>
<li>Understanding <a href="/docs/beta/authentication/#perms" name="https://developers.facebook.com/docs/beta/authentication/#perms">Open Graph Permissions</a>
</li>
</ul>
<div style="text-align: center;">
<img src="https://developers.facebook.com/attachment/gdp-v3-learn-more-blog.png" />
<br />
</div>
<p>
<br />
</p>
<p>
<a name="configure">
</a>
</p>
<div style="height: 3px;">
</div>
<hr />
<h2>Configuring the Auth Dialog</h2>
<p>The updated Auth Dialog is configured in the <a href="https://developers.facebook.com/apps" name="https://developers.facebook.com/apps" target="_blank">App Dashboard</a>. Auth Dialog tab is found in: <b>Settings &gt; Auth Dialog</b>.</p>
<div style="text-align: center;">
<img src="https://developers.facebook.com/attachment/devapp_auth_dialog_v3.png" width="100%" />
</div>
<h3>Customize</h3>
<p>In the Customize section of the Auth Configuration, you will be able to update how the header and text of the right pane of the Dialog will appear to your users. While these are all optional configurations, you should update this section to create a user friendly Auth Dialog.</p>
<div style="text-align: center;">
<img src="https://developers.facebook.com/attachment/login_add_to_facebook_legend_v2_2.png" width="100%" />
</div>
<p>
<br />
</p>
<ol>
<li>
<strong>Logo</strong>: Upload a logo for your app</li>
<li>
<strong>Headline</strong>: One line description of your app</li>
<li>
<strong>Description</strong>: Longer description of your app which will be shown in the &quot;About this app&quot;</li>
<li>
<strong>Privacy Policy URL</strong>: Your privacy URL </li>
<li>
<strong>Terms of Service URL</strong>: Your terms of service URL</li>
<li>
<strong>Add Data to Profile URL</strong>: The new user flow URL for your app. This URL should point to a URL that expedites for engagement and action publishing. See the <a href="/docs/beta/authentication/#add-data" name="https://developers.facebook.com/docs/beta/authentication/#add-data">Add Data to Profile</a> section below. </li>
<li>
<strong>Explanation for Permissions</strong>: If your app requires extended permissions other than <code>email</code> and <code>publish_actions</code>, a second Auth dialog screen will appear after the user authorizes the initial Auth Dialog. This is the text to explain why you need the additional permissions. </li>
<li>
<strong>Default Activity Privacy</strong>: This field sets the Auth Dialog with a default action visibility setting which users can update when they authorize your app. By default, this value is set to <code>None</code>, which means your actions published will follow the user&apos;s default privacy permissions. A user&apos;s default privacy permissions, which is originally set by the user through the Privacy Settings page, applies whenever the user posts on Facebook. If the user changes it to <code>Friends</code>, the permission will be updated to friends only. If the user changes that to <code>Public</code>, your app activity will turn into public actions. Possible settings: <code>None</code>, <code>Friends</code>, <code>Me only</code>, or <code>Public</code>. The user can also change the Activity Privacy setting through the Auth Dialog. </li>
</ol>
<p>
<a name="referrals">
</a>
</p>
<div style="height: 6px;">
</div>
<h3>Authenticated Referrals</h3>
<p>Authenticated referrals is a new feature that ensures all referral traffic from Facebook to your application is already connected to Facebook. Visitors arriving to your app will be automatically logged in and, if necessary, be prompted for any permissions you have requested.</p>
<p>This feature grants you the opportunity to build a deeply personalized experience for Facebook visitors as soon as they arrive at your app. If your app integrates with Open Graph, you can have visitors immediately publishing Open Graph actions once they have authorized your app.</p>
<div style="text-align: center;">
<img src="https://developers.facebook.com/attachment/gdp-v3-auth-ref.png" />
<br />
</div>
<p>
<br />
</p>
<p>Once enabled, authenticated referrals causes all clicks to your app on Facebook (such as through Open Graph stories and activities published by your app) to automatically prompt a new user with the Auth dialog. This dialog will request all permissions specified in the <strong>User &amp; Friend Permissions</strong> field under the <strong>Authenticated Referrals</strong> section of your app <strong>Auth Dialog</strong> settings. If the user rejects this request, they will still remain on Facebook.</p>
<p>For Open Graph-enabled apps, authenticated referrals should dramatically increase the number of Facebook-connected visitors to your app. This makes it easier to build a personalized, engaging experience for your user base, who will in turn promote discovery of your app through Facebook&apos;s social channels.</p>
<p>
<center>
<img src="https://developers.facebook.com/attachment/auth_referral_configure.png" width="650px" />
</center>
</p>
<p>The following fields are available when configuring the <strong>Authenticated Referrals</strong> section under the <strong>Auth Dialog</strong> settings:</p>
<ol>
<li>
<strong>User &amp; Friend Permissions</strong>: If Authenticated Referrals is enabled and a user clicks on an Open Graph activity (News Feed, Ticker, Timeline), user will be prompted with an Auth Dialog with these <a href="/docs/reference/api/permissions/#user_friends_perms" name="https://developers.facebook.com/docs/reference/api/permissions/#user_friends_perms">permissions</a> as <strong>required</strong> before the user lands on your app. </li>
<li>
<strong>Extended Permissions</strong>: If Authenticated Referrals is enabled and a user clicks on an Open Graph activity (News Feed, Ticker, Timeline), user will be prompted with an Auth Dialog with these <a href="/docs/reference/api/permissions/#extended_perms" name="https://developers.facebook.com/docs/reference/api/permissions/#extended_perms">permissions</a> as <strong>optional</strong>, which means the user can &quot;x&quot; these permissions out and still authorize your app.</li>
<li>
<strong>Auth Token Parameter</strong>: If Authenticated Referrals is enabled and when a user authorizes your app through the in-line Auth Dialog, we will pass your app the Auth Token in the format specified here. Available formats: <ul>
<li>
<code>URI Fragment</code>: if your app is using client-side authentication</li>
<li>
<code>Query String</code>: if your app is using server-side authentication. If your app is a <strong>canvas app</strong>, we will not use this setting and will use the &quot;signed_request&quot; as the response type automatically. </li>
</ul>
</li>
</ol>
<p>
<strong>A special consideration when using the Query String setting:</strong>
</p>
<p>If you would like to use the <a href="/docs/authentication/server-side/" name="https://developers.facebook.com/docs/authentication/server-side/">server-side authentication</a> flow it is important to make sure you are passing the <code>redirect_uri</code> parameter correctly when exchanging your <code>code</code> for an access token. You should set your <code>redirect_uri</code> parameter to the click-through URL to your site without the <code>code</code> parameter. In most cases the URL will look something like:</p>
<pre>
<code> http://www.example.com/?fb_source=search&amp;code=CODE_HERE
</code>
</pre>
<p>Once you strip the code parameter it will become:</p>
<pre>
<code> http://www.example.com/?fb_source=search
</code>
</pre>
<p>which is the value that should be set in <code>redirect_uri</code>. Please make sure that this logic is dynamic as the query parameters appended to your click-through URL may be subject to change.</p>
<p>We strongly encourage all Open Graph apps to leverage Authenticated Referrals, as it will help drive activity, sharing, and distribution of your app. Authenticated Referrals is turned on for all new apps and off by default for all existing apps on Platform. Enable this feature by visiting the Auth Dialog tab in the <a href="/docs/beta/authentication/apps/" name="https://developers.facebook.com/docs/beta/authentication/apps">App Dashboard</a> and select &quot;Enabled&quot; for Authenticated Referrals option.</p>
<p>
<a name="add-data">
</a>
</p>
<div style="height: 6px;">
</div>
<h3>Add Data to Profile URL</h3>
<p>Create a new user flow for your app and enter the URL here. The new user flow should optimize for <strong>user engagement</strong> and <strong>publish actions</strong>. For example, rather than showing the standard Running app&apos;s homepage which includes a banner and run of the day, the new user flow may have a list of Runs and ask the user to start a running diary, or a list of friends&apos; runs and ask the user to click a button to cheer them on.</p>
<p>When the Add Data to Profile URL is set in the <a href="https://developers.facebook.com/apps" name="https://developers.facebook.com/apps" target="_blank">App Dashboard</a>, your app will get:</p>
<ul>
<li>
<strong>Perforated Unit</strong>: An Aggregate that is displayed on a new user&apos;s Timeline. This unit will encourage new users to start using your app. </li>
</ul>
<div style="text-align: center;">
<img src="https://developers.facebook.com/attachment/perferated_unit.png" />
<br />
</div>
<p>
<br />
</p>
<ul>
<li>
<strong>Add to My Timeline Link</strong>: When an Aggregate or Report is displayed on your users&apos; Timelines, an &quot;Add to My Timeline&quot; link will appear to encourage friends to install and try your app. </li>
</ul>
<div style="text-align: center;">
<img src="https://developers.facebook.com/attachment/add-to-my-timeline.png" />
<br />
</div>
<p>
<br />
</p>
<p>
<a name="perms">
</a>
</p>
<div style="height: 3px;">
</div>
<hr />
<h2>Permissions</h2>
<p>The updated Auth Dialog will display a set of <a href="/docs/reference/api/permissions/#user_friends_perms" name="https://developers.facebook.com/docs/reference/api/permissions/#user_friends_perms">user and friends permissions</a> on the first dialog, and other <a href="/docs/reference/api/permissions/#extended_perms" name="https://developers.facebook.com/docs/reference/api/permissions/#extended_perms">extended permissions</a> (if any) on a second dialog screen. User and friends permissions are non-revocable, while extended permissions can be revoked by clicking on the &quot;X&quot; next to each permission on the second dialog screen. Your app must be ready to handle each scenario (permissions granted, and revoked) properly.</p>
<p>Open Graph apps require the <code>publish_actions</code> permission. Requesting the <code>publish_actions</code> permission will not cause a second dialog screen. However, users will be able to revoke this permission from the <a href="https://www.facebook.com/settings?tab=applications" name="https://www.facebook.com/settings?tab=applications" target="_blank">Apps tab</a> on the Account Settings page. Common permissions (including <code>email</code> and <code>publish_actions</code>) are now displayed in a more condensed, bucketed form to users. Please note that <code>publish_actions</code> permission will only be visible to the developers and testers of your app, until your actions are approved. See the <a href="/docs/opengraph/opengraph-approval/" name="https://developers.facebook.com/docs/opengraph/opengraph-approval/">Approval Process</a> for more details.</p>
<div style="text-align: center;">
<img src="https://developers.facebook.com/attachment/gdp-v3-learn-more-blog.png" />
<br />
</div>
<p>
<br />
</p>
<p>If you request any other extended permissions (as described on <a href="/docs/reference/api/permissions/" name="https://developers.facebook.com/docs/reference/api/permissions/">the permissions list</a>), your users will have to go through a second dialog page after installing your application. This second page outlines each of the extended permissions in greater detail, providing descriptions for each individual permission. <b>The user will be able to remove any of these permissions, or skip this stage entirely</b>, which results in rejecting every extended permission you&apos;ve requested. Your app should be able to handle revocation of any subset of extended permissions for installed users.</p>
<p>This is a sample second screen of the permissions dialog that is requesting for <code>read_stream</code>.</p>
<div style="text-align: center;">
<img src="https://developers.facebook.com/attachment/gdp-v3-learn-more-page-2-blog.png" />
<br />
</div>
<p>
<br />
</p>
<div class="mtl pvm uiBoxWhite topborder">
<div class="mbm lfloat">
<fb:like href="http://developers.facebook.com/docs/opengraph/authentication/" send="true" show_faces="false">
</fb:like>
</div>
<div class="clear">
<abbr class="timestamp" data-utime="1339449452" title="2012年6月11日 14:17">2012年6月11日 14:17</abbr>
</div>
</div></div>

</body>
</html>
